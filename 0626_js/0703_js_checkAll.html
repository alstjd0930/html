<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
</head>
<style>
    .checkboxs{
        display: grid;
        grid-template-columns: auto auto  auto  ;
    }
</style>
<body>
    <div>
        <label for="allCheck">전체선택 :</label>
        <input type="checkbox" id="allCheck">
        <span>반대선택 :</span>
        <input type="checkbox" id="allCheck">
    </div>
    <div class="checkboxs">
<!--         <div>
            <div>
                <label for="id-1">id-1 : </label>
                <input type="checkbox" id="id-1">
            </div>
            <div>
                <label for="id-2">id-1 : </label>
                <input type="checkbox" id="id-2">
            </div>
        </div> -->
    </div>
    <div class="checkedItems">
        <div>
            <span>id-1</span>
            <button type="button" class="btnUncheck" value="선택해제">선택해제</button>
        </div>
    </div>
    <script>
        // 1.화면에 item 구성
        const itemCnt = 10;     //const 상수 
        // ` 백틱: 문자열형태 - 변수사용시 ${변수명}
        var htmlval =""
        for(var i=1 ; i<itemCnt+1 ; i++){
            htmlval += `
            <div>
                <label for="id-${i}">id-${i} : </label>
                <input type="checkbox" id="id-${i}" class="item">
            </div>
            `;
        }
        $(".checkboxs").append(htmlval)

        //전체선택 이벤트 등록
        $("#allCheck").on("click",allCheckHandler);
        //item 이벤트 등록
        $(".item").on("click",itemCheckHandler);


        //이벤트 처리 Handler
        function allCheckHandler(e){
            console.log($(this).prop("checked")) //현제 전체선택의상태 true/ false item들에게 적용
            $(".item").prop("checked",$(this).prop("checked")); //prop : 메소드는 동적페이지 변화를 인지하고 그 결과값을 true/false로 줌
        }
        function itemCheckHandler(e){
            //console.log($(this).prop("checked")) 
            console.log($(".item:checked"))
            if(itemCnt == $(".item:checked").length){
                $("#allCheck").prop("checked",true);
            }else{
                $("#allCheck").prop("checked",false);
            }

            //checkedItem에 선택된 item div로 생성
            var htmlval =""
            htmlval += `
            <div>
                <span>id-1</span>
                <button type="button" class="btnUncheck" value="선택해제">선택해제</button>
            </div>
            `;
            $(".ckeckedItems").append(htmlval)
        }
    </script>
</body>
</html>